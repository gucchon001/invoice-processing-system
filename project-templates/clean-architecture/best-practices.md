# PythonÂÆüË£Ö„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„ÇπÈõÜ

## üìã Ê¶ÇË¶Å

Clean Architecture„Å´Âü∫„Å•„ÅèPython„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÂÆüË£Ö„Å´„Åä„ÅÑ„Å¶„ÄÅÂìÅË≥™„Å®‰øùÂÆàÊÄß„ÇíÂêë‰∏ä„Åï„Åõ„Çã„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„ÇπÈõÜ„Åß„Åô„ÄÇ

## üèóÔ∏è „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊßãÈÄ†„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ

### 1. „Éï„Ç°„Ç§„É´„Å®„É¢„Ç∏„É•„Éº„É´„ÅÆÁµÑÁπîÂåñ

#### ‚úÖ Êé®Â•®„Éë„Çø„Éº„É≥
```python
# Ê©üËÉΩÂà•„Åß„Éï„Ç°„Ç§„É´„ÇíÂàÜÂâ≤
src/core/models/
‚îú‚îÄ‚îÄ user.py          # „É¶„Éº„Ç∂„ÉºÈñ¢ÈÄ£„ÅÆ„Åø
‚îú‚îÄ‚îÄ invoice.py       # Ë´ãÊ±ÇÊõ∏Èñ¢ÈÄ£„ÅÆ„Åø
‚îî‚îÄ‚îÄ payment.py       # ÊîØÊâï„ÅÑÈñ¢ÈÄ£„ÅÆ„Åø

# Ë≤¨Âãô„ÅÆÊòéÁ¢∫„Å™ÂàÜÈõ¢
src/infrastructure/database/
‚îú‚îÄ‚îÄ connection.py    # DBÊé•Á∂öÁÆ°ÁêÜ
‚îú‚îÄ‚îÄ repositories.py  # „Éá„Éº„Çø„Ç¢„ÇØ„Çª„Çπ
‚îî‚îÄ‚îÄ migrations.py    # „Çπ„Ç≠„Éº„ÉûÂ§âÊõ¥
```

#### ‚ùå ÈÅø„Åë„Çã„Åπ„Åç„Éë„Çø„Éº„É≥
```python
# Â∑®Â§ß„Å™„Éï„Ç°„Ç§„É´
src/models.py        # ÂÖ®„Å¶„ÅÆ„É¢„Éá„É´„Åå1„Éï„Ç°„Ç§„É´ÔºàNGÔºâ
src/utils.py         # ‰Ωï„Åß„ÇÇÂÖ•„ÇåÁâ©ÔºàNGÔºâ
```

### 2. __init__.py„ÅÆÊ¥ªÁî®

#### ÂÖ¨ÈñãAPI„ÅÆÊòéÁ¢∫Âåñ
```python
# src/core/models/__init__.py
from .user import User, UserService
from .invoice import Invoice, InvoiceService

# Â§ñÈÉ®„Å´ÂÖ¨Èñã„Åô„Çã„ÇÇ„ÅÆ„ÅÆ„Åø„Ç®„ÇØ„Çπ„Éù„Éº„Éà
__all__ = [
    'User',
    'UserService', 
    'Invoice',
    'InvoiceService'
]
```

#### „Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜ
```python
# src/__init__.py
__version__ = "1.2.3"
__author__ = "Your Team"
__email__ = "team@company.com"
```

## üéØ „Ç≥„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Çø„É≥„ÉÄ„Éº„Éâ

### 1. Âûã„Éí„É≥„Éà„ÅÆÊ¥ªÁî®

#### ÂÆåÂÖ®„Å™Âûã„Éí„É≥„Éà
```python
from typing import List, Optional, Dict, Any
from datetime import datetime

class Invoice:
    def __init__(self, 
                 id: Optional[int],
                 amount: float,
                 created_at: datetime) -> None:
        self.id = id
        self.amount = amount
        self.created_at = created_at
    
    def calculate_tax(self, rate: float) -> float:
        return self.amount * rate
    
    def to_dict(self) -> Dict[str, Any]:
        return {
            'id': self.id,
            'amount': self.amount,
            'created_at': self.created_at.isoformat()
        }
```

#### UnionÂûã„Å® GenericÂûã
```python
from typing import Union, Generic, TypeVar, Protocol

T = TypeVar('T')

class Repository(Protocol, Generic[T]):
    def save(self, entity: T) -> T: ...
    def find_by_id(self, id: Union[int, str]) -> Optional[T]: ...
```

### 2. „Éá„Éº„Çø„ÇØ„É©„Çπ„ÅÆÊ¥ªÁî®

#### dataclassÂü∫Êú¨„Éë„Çø„Éº„É≥
```python
from dataclasses import dataclass, field
from datetime import datetime
from typing import List, Optional

@dataclass(frozen=True)  # „Ç§„Éü„É•„Éº„Çø„Éñ„É´
class User:
    id: Optional[int]
    email: str
    name: str
    created_at: datetime = field(default_factory=datetime.now)
    tags: List[str] = field(default_factory=list)
    
    def __post_init__(self) -> None:
        if not self.email or '@' not in self.email:
            raise ValueError("Invalid email format")
```

#### „Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØ‰ªò„Åçdataclass
```python
@dataclass
class Invoice:
    amount: float
    tax_rate: float = 0.1
    
    @property
    def total_amount(self) -> float:
        return self.amount * (1 + self.tax_rate)
    
    def is_large_invoice(self) -> bool:
        return self.amount > 100000
```

### 3. ‰æãÂ§ñÂá¶ÁêÜ„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ

#### „Ç´„Çπ„Çø„É†‰æãÂ§ñ„ÅÆÂÆöÁæ©
```python
# src/utils/exceptions.py
class InvoiceProcessingError(Exception):
    """Ë´ãÊ±ÇÊõ∏Âá¶ÁêÜÈñ¢ÈÄ£„ÅÆ„Ç®„É©„ÉºÂü∫Â∫ï„ÇØ„É©„Çπ"""
    pass

class InvoiceValidationError(InvoiceProcessingError):
    """Ë´ãÊ±ÇÊõ∏„Éê„É™„Éá„Éº„Ç∑„Éß„É≥„Ç®„É©„Éº"""
    def __init__(self, field: str, value: Any, message: str):
        self.field = field
        self.value = value
        super().__init__(f"Validation error for {field}: {message}")

class InvoiceNotFoundError(InvoiceProcessingError):
    """Ë´ãÊ±ÇÊõ∏„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ„Ç®„É©„Éº"""
    def __init__(self, invoice_id: int):
        self.invoice_id = invoice_id
        super().__init__(f"Invoice not found: {invoice_id}")
```

#### ÈÅ©Âàá„Å™‰æãÂ§ñÂá¶ÁêÜ
```python
class InvoiceService:
    def process_invoice(self, data: dict) -> Invoice:
        try:
            # „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if not data.get('amount') or data['amount'] <= 0:
                raise InvoiceValidationError('amount', data.get('amount'), 'Must be positive')
            
            # Âá¶ÁêÜÂÆüË°å
            invoice = self._create_invoice(data)
            return self._save_invoice(invoice)
            
        except InvoiceValidationError:
            # ÂÖ∑‰ΩìÁöÑ„Å™‰æãÂ§ñ„ÅØÂÜçÁô∫Áîü
            raise
        except Exception as e:
            # ‰∫àÊúü„Åó„Å™„ÅÑ„Ç®„É©„Éº„ÅØ„É©„ÉÉ„Éó
            raise InvoiceProcessingError(f"Unexpected error: {e}") from e
```

## üîß „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊúÄÈÅ©Âåñ

### 1. „Éá„Éº„Çø„Éô„Éº„Çπ„Ç¢„ÇØ„Çª„ÇπÊúÄÈÅ©Âåñ

#### N+1ÂïèÈ°å„ÅÆÂõûÈÅø
```python
# ‚ùå ÊÇ™„ÅÑ‰æãÔºöN+1ÂïèÈ°å
def get_invoices_with_users_bad() -> List[Invoice]:
    invoices = db.query("SELECT * FROM invoices")
    for invoice in invoices:
        # ÂêÑË´ãÊ±ÇÊõ∏„Åî„Å®„Å´„ÇØ„Ç®„É™„ÅåÁô∫ÁîüÔºàN+1ÂïèÈ°åÔºâ
        user = db.query("SELECT * FROM users WHERE id = ?", invoice.user_id)
        invoice.user = user
    return invoices

# ‚úÖ ËâØ„ÅÑ‰æãÔºöJOIN„Çí‰ΩøÁî®
def get_invoices_with_users_good() -> List[Invoice]:
    query = """
    SELECT i.*, u.name as user_name, u.email as user_email
    FROM invoices i
    JOIN users u ON i.user_id = u.id
    """
    rows = db.query(query)
    return [self._build_invoice_with_user(row) for row in rows]
```

#### „Éê„ÉÉ„ÉÅÂá¶ÁêÜ
```python
class InvoiceRepository:
    def save_multiple(self, invoices: List[Invoice]) -> List[Invoice]:
        """„Éê„ÉÉ„ÉÅ„Åß„ÅÆ‰øùÂ≠òÂá¶ÁêÜ"""
        query = """
        INSERT INTO invoices (user_id, amount, created_at)
        VALUES (?, ?, ?)
        """
        data = [(inv.user_id, inv.amount, inv.created_at) for inv in invoices]
        self.db.executemany(query, data)
        return invoices
```

### 2. „É°„É¢„É™‰ΩøÁî®Èáè„ÅÆÊúÄÈÅ©Âåñ

#### „Ç∏„Çß„Éç„É¨„Éº„Çø„Éº„ÅÆÊ¥ªÁî®
```python
# ‚ùå ÊÇ™„ÅÑ‰æãÔºöÂÖ®„Å¶„Çí„É°„É¢„É™„Å´Ë™≠„ÅøËæº„Åø
def process_all_invoices_bad() -> List[ProcessedInvoice]:
    all_invoices = self.repository.get_all()  # Â§ßÈáè„Éá„Éº„Çø„Çí‰∏ÄÂ∫¶„Å´ÂèñÂæó
    return [self.process_invoice(inv) for inv in all_invoices]

# ‚úÖ ËâØ„ÅÑ‰æãÔºö„Ç∏„Çß„Éç„É¨„Éº„Çø„Éº„ÅßÈÄêÊ¨°Âá¶ÁêÜ
def process_all_invoices_good() -> Iterator[ProcessedInvoice]:
    for invoice in self.repository.get_all_as_generator():
        yield self.process_invoice(invoice)
```

#### __slots__„ÅÆÊ¥ªÁî®
```python
class LightweightUser:
    """„É°„É¢„É™ÂäπÁéá„ÅÆËâØ„ÅÑ„É¶„Éº„Ç∂„Éº„ÇØ„É©„Çπ"""
    __slots__ = ['id', 'name', 'email']
    
    def __init__(self, id: int, name: str, email: str):
        self.id = id
        self.name = name
        self.email = email
```

## üß™ „ÉÜ„Çπ„Éà„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ

### 1. „ÉÜ„Çπ„ÉàÊßãÈÄ†Âåñ

#### AAA „Éë„Çø„Éº„É≥ÔºàArrange-Act-AssertÔºâ
```python
import pytest
from unittest.mock import Mock

class TestInvoiceService:
    def test_create_invoice_success(self):
        # ArrangeÔºàÊ∫ñÂÇôÔºâ
        repository = Mock()
        service = InvoiceService(repository)
        invoice_data = {
            'amount': 1000.0,
            'user_id': 1,
            'description': '„ÉÜ„Çπ„ÉàË´ãÊ±ÇÊõ∏'
        }
        expected_invoice = Invoice(id=1, **invoice_data)
        repository.save.return_value = expected_invoice
        
        # ActÔºàÂÆüË°åÔºâ
        result = service.create_invoice(invoice_data)
        
        # AssertÔºàÊ§úË®ºÔºâ
        assert result.id == 1
        assert result.amount == 1000.0
        repository.save.assert_called_once()
```

#### „Éë„É©„É°„Éº„ÇøÂåñ„ÉÜ„Çπ„Éà
```python
@pytest.mark.parametrize("amount,expected_tax", [
    (1000, 100),      # 10%Á®éÁéá
    (2000, 200),      # 10%Á®éÁéá
    (0, 0),           # Â¢ÉÁïåÂÄ§
])
def test_calculate_tax(amount, expected_tax):
    invoice = Invoice(amount=amount, tax_rate=0.1)
    assert invoice.calculate_tax() == expected_tax
```

### 2. „Éï„Ç£„ÇØ„Çπ„ÉÅ„É£„Éº„ÅÆÊ¥ªÁî®

#### ÂÜçÂà©Áî®ÂèØËÉΩ„Å™„Éï„Ç£„ÇØ„Çπ„ÉÅ„É£„Éº
```python
# tests/conftest.py
@pytest.fixture
def sample_user():
    return User(
        id=1,
        email="test@example.com",
        name="„ÉÜ„Çπ„Éà„É¶„Éº„Ç∂„Éº"
    )

@pytest.fixture
def sample_invoice(sample_user):
    return Invoice(
        id=1,
        user_id=sample_user.id,
        amount=1000.0,
        created_at=datetime.now()
    )

# „ÉÜ„Çπ„Éà„Åß‰ΩøÁî®
def test_invoice_processing(sample_invoice):
    # sample_invoice„ÅåËá™ÂãïÁöÑ„Å´Ê≥®ÂÖ•„Åï„Çå„Çã
    assert sample_invoice.amount == 1000.0
```

### 3. „É¢„ÉÉ„ÇØ„ÅÆÂäπÊûúÁöÑ‰ΩøÁî®

#### Â§ñÈÉ®‰æùÂ≠ò„ÅÆ„É¢„ÉÉ„ÇØÂåñ
```python
class TestEmailService:
    @patch('smtplib.SMTP')
    def test_send_email_success(self, mock_smtp):
        # SMTP„É©„Ç§„Éñ„É©„É™„Çí„É¢„ÉÉ„ÇØÂåñ
        mock_server = Mock()
        mock_smtp.return_value = mock_server
        
        email_service = EmailService()
        result = email_service.send_notification(
            to="test@example.com",
            subject="„ÉÜ„Çπ„Éà",
            body="„É°„ÉÉ„Çª„Éº„Ç∏"
        )
        
        assert result is True
        mock_server.sendmail.assert_called_once()
```

## üìù „Éâ„Ç≠„É•„É°„É≥„ÉÜ„Éº„Ç∑„Éß„É≥

### 1. DocstringË¶èÂâá

#### Google „Çπ„Çø„Ç§„É´
```python
def calculate_invoice_total(amount: float, tax_rate: float = 0.1) -> float:
    """Ë´ãÊ±ÇÊõ∏„ÅÆÂêàË®àÈáëÈ°ç„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ

    Args:
        amount: Âü∫Êú¨ÈáëÈ°çÔºàÁ®éÊäú„ÅçÔºâ
        tax_rate: Á®éÁéáÔºà„Éá„Éï„Ç©„É´„Éà: 0.1 = 10%Ôºâ

    Returns:
        Á®éËæº„ÅøÂêàË®àÈáëÈ°ç

    Raises:
        ValueError: amount„ÅåË≤†„ÅÆÂÄ§„ÅÆÂ†¥Âêà

    Example:
        >>> calculate_invoice_total(1000, 0.08)
        1080.0
    """
    if amount < 0:
        raise ValueError("Amount must be non-negative")
    return amount * (1 + tax_rate)
```

### 2. Âûã„Éí„É≥„Éà‰ªò„Åç„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ

#### „Éó„É≠„Éà„Ç≥„É´„ÇØ„É©„Çπ
```python
from typing import Protocol, runtime_checkable

@runtime_checkable
class PaymentProcessor(Protocol):
    """ÊîØÊâï„ÅÑÂá¶ÁêÜ„ÅÆ„Éó„É≠„Éà„Ç≥„É´"""
    
    def process_payment(self, amount: float, payment_method: str) -> bool:
        """ÊîØÊâï„ÅÑ„ÇíÂá¶ÁêÜ„Åó„Åæ„Åô„ÄÇ
        
        Args:
            amount: ÊîØÊâï„ÅÑÈáëÈ°ç
            payment_method: ÊîØÊâï„ÅÑÊñπÊ≥ï
            
        Returns:
            Âá¶ÁêÜÊàêÂäüÊôÇ„ÅØTrue„ÄÅÂ§±ÊïóÊôÇ„ÅØFalse
        """
        ...
```

## üîí „Çª„Ç≠„É•„É™„ÉÜ„Ç£„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ

### 1. ÂÖ•ÂäõÊ§úË®º

#### „Éê„É™„Éá„Éº„Ç∑„Éß„É≥Èñ¢Êï∞
```python
import re
from typing import Union

def validate_email(email: str) -> bool:
    """„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÅÆÂΩ¢Âºè„ÇíÊ§úË®º"""
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    return bool(re.match(pattern, email))

def sanitize_filename(filename: str) -> str:
    """„Éï„Ç°„Ç§„É´Âêç„Çí„Çµ„Éã„Çø„Ç§„Ç∫"""
    # Âç±Èô∫„Å™ÊñáÂ≠ó„ÇíÈô§Âéª
    unsafe_chars = '<>:"/\\|?*'
    for char in unsafe_chars:
        filename = filename.replace(char, '_')
    return filename[:255]  # Èï∑„ÅïÂà∂Èôê
```

### 2. Ê©üÂØÜÊÉÖÂ†±„ÅÆÁÆ°ÁêÜ

#### Áí∞Â¢ÉÂ§âÊï∞„ÅÆ‰ΩøÁî®
```python
import os
from dataclasses import dataclass

@dataclass
class Config:
    """Ë®≠ÂÆöÁÆ°ÁêÜ„ÇØ„É©„Çπ"""
    database_url: str = os.getenv('DATABASE_URL', '')
    api_key: str = os.getenv('API_KEY', '')
    debug_mode: bool = os.getenv('DEBUG', 'False').lower() == 'true'
    
    def __post_init__(self):
        if not self.database_url:
            raise ValueError("DATABASE_URL is required")
        if not self.api_key:
            raise ValueError("API_KEY is required")
```

## üöÄ „Éá„Éó„É≠„Ç§„É°„É≥„ÉàÊ∫ñÂÇô

### 1. Ë®≠ÂÆö„Éï„Ç°„Ç§„É´„ÉÜ„É≥„Éó„É¨„Éº„Éà

#### requirements.txtÁÆ°ÁêÜ
```txt
# requirements.txtÔºàÊú¨Áï™Áî®Ôºâ
streamlit>=1.28.0
pandas>=2.0.0
requests>=2.31.0
python-dotenv>=1.0.0

# requirements-dev.txtÔºàÈñãÁô∫Áî®Ôºâ
-r requirements.txt
pytest>=7.4.0
black>=23.0.0
flake8>=6.0.0
mypy>=1.5.0
coverage>=7.3.0
```

#### .env.example
```bash
# „Éá„Éº„Çø„Éô„Éº„ÇπË®≠ÂÆö
DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# APIË®≠ÂÆö
GEMINI_API_KEY=your_gemini_api_key_here
GOOGLE_DRIVE_CREDENTIALS=path/to/credentials.json

# „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö
DEBUG=False
LOG_LEVEL=INFO
```

### 2. DockerÂåñ

#### Dockerfile
```dockerfile
FROM python:3.11-slim

WORKDIR /app

# ‰æùÂ≠òÈñ¢‰øÇ„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„Ç≥„Éî„Éº
COPY . .

# „Éù„Éº„ÉàÂÖ¨Èñã
EXPOSE 8501

# „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂÆüË°å
CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

„Åì„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„ÇπÈõÜ„ÇíÂèÇËÄÉ„Å´„ÄÅÂìÅË≥™„ÅÆÈ´ò„ÅÑPython„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÈñãÁô∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ 