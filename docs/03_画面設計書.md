# ç”»é¢è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 2.0  
**æœ€çµ‚æ›´æ–°:** 2025å¹´7æœˆ27æ—¥ - ğŸ‰ **çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå®Œå…¨å†æ§‹ç¯‰å¯¾å¿œãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½æ‹¡å¼µ**  
**ä½œæˆæ—¥:** 2025/01/23  

## 1. æ¦‚è¦

### 1.1 è¨­è¨ˆæ€æƒ³
- **çµ±ä¸€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: ãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªã§åŒä¸€å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨
- **ã‚¿ãƒ–çµ±åˆUI**: é–¢é€£æ©Ÿèƒ½ã‚’åŒä¸€ç”»é¢ã§ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ç›´æ„Ÿçš„æ“ä½œã¨ã‚¨ãƒ©ãƒ¼ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
- **ğŸ‰ çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ**: æœ¬ç•ªãƒ»OCRãƒ†ãƒ¼ãƒ–ãƒ«å®Œå…¨çµ±ä¸€ã«ã‚ˆã‚‹ä¸€è²«ã—ãŸãƒ‡ãƒ¼ã‚¿è¡¨ç¤º **NEW**
- **ğŸ‰ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½è¨­è¨ˆ**: ã‚¿ãƒ–åˆ†å‰²è©³ç´°è¡¨ç¤ºã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼åŠ¹ç‡åŒ– **NEW**
- **ğŸ‰ æ ¹æœ¬ä¿®æ­£è¨­è¨ˆ**: `main_invoice_number`ã‚¨ãƒ©ãƒ¼å®Œå…¨è§£æ±ºã«ã‚ˆã‚‹å®‰å®šç¨¼åƒ **NEW**

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Streamlit
- **UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: ag-Grid, Streamlitæ¨™æº–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **èªè¨¼**: Google OAuth 2.0
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: Streamlit column system
- **ğŸ‰ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½**: Streamlit tabs, ag-Gridæ‹¡å¼µ, JSONè¡¨ç¤º, PDFè¡¨ç¤º **NEW**
- **ğŸ‰ çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒ**: `main_invoice_number`, `t_number`, `receipt_number`, `key_info`å¯¾å¿œ **NEW**
- **ğŸ‰ ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼**: çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¤œè¨¼, æ˜ç´°è¡¨ç¤º, è©³ç´°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ **NEW**

## 2. ç”»é¢æ§‹æˆ

### 2.1 ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹æˆï¼ˆæ›´æ–°ç‰ˆï¼‰
```
ğŸ“‹ ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”œâ”€â”€ ğŸ“¤ è«‹æ±‚æ›¸å‡¦ç† â˜…çµ±åˆãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ ğŸš€ æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚¿ãƒ–ï¼‰
â”‚   â””â”€â”€ ğŸ” OCRãƒ†ã‚¹ãƒˆï¼ˆã‚¿ãƒ–ï¼‰
â”œâ”€â”€ ğŸ“Š å‡¦ç†çŠ¶æ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”œâ”€â”€ âš™ï¸ ãƒ¡ãƒ¼ãƒ«è¨­å®š
â”œâ”€â”€ ğŸ”§ DBæ¥ç¶šãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ ğŸ¤– Gemini APIãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ â˜ï¸ Google Drive APIãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ ğŸ“Š ag-grid ãƒ‡ãƒ¼ã‚¿ã‚°ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ
â””â”€â”€ ğŸ”„ çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
```

### 2.2 çµ±åˆè«‹æ±‚æ›¸å‡¦ç†ãƒšãƒ¼ã‚¸ï¼ˆæ–°è¨­è¨ˆï¼‰

#### 2.2.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¤ è«‹æ±‚æ›¸å‡¦ç†                       â”‚
â”‚ æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨OCRãƒ†ã‚¹ãƒˆã‚’çµ±ä¸€ãƒ¯ãƒ¼â”‚
â”‚ ã‚¯ãƒ•ãƒ­ãƒ¼ã§å‡¦ç†ã—ã¾ã™                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸš€ æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰] [ğŸ” OCRãƒ†ã‚¹ãƒˆ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—† ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–å†…å®¹                 â”‚
â”‚   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‡ªå‹•é¸æŠ               â”‚
â”‚   - å‡¦ç†è¨­å®š                        â”‚
â”‚   - ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›                    â”‚
â”‚   - å®Ÿè¡Œãƒœã‚¿ãƒ³                      â”‚
â”‚   - çµæœè¡¨ç¤º                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.2 æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¿ãƒ–
```
âœ… è‡ªå‹•é¸æŠã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: Expert Invoice Data Extractor
ğŸ“ æœ¬ç•ªå‡¦ç†ã«æœ€é©ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè‡ªå‹•é¸æŠã•ã‚Œã¾ã™
âœ… äº’æ›æ€§OK

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
[PDFé¸æŠã‚¨ãƒªã‚¢ - è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ]

### âš™ï¸ å‡¦ç†è¨­å®š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â˜‘ï¸ è©³ç´°æ¤œè¨¼å®Ÿè¡Œâ”‚â˜‘ï¸ è‡ªå‹•ä¿å­˜   â”‚
â”‚çµ±ä¸€æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ â”‚å‡¦ç†å®Œäº†å¾Œã«è‡ªå‹•â”‚
â”‚ã«ã‚ˆã‚‹è©³ç´°åˆ†æ  â”‚çš„ã«DBä¿å­˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### ğŸš€ å‡¦ç†å®Ÿè¡Œ
[ğŸ“Š æœ¬ç•ªå‡¦ç†é–‹å§‹ (Xä»¶)] [å…¨å¹…ãƒœã‚¿ãƒ³]

### ğŸ“Š å‡¦ç†çµæœ
- é€²è¡ŒçŠ¶æ³è¡¨ç¤º
- å‡¦ç†çµæœã‚µãƒãƒªãƒ¼
- **ğŸ‰ è©³ç´°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚¿ãƒ–åˆ†å‰²ï¼‰**: åŸºæœ¬æƒ…å ±ãƒ»æ˜ç´°ãƒ»JSONãƒ»PDF **NEW**
- çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¡¨ç¤º: `main_invoice_number`, `t_number`, `receipt_number`, `key_info`
```

#### 2.2.3 OCRãƒ†ã‚¹ãƒˆã‚¿ãƒ–
```
âœ… è‡ªå‹•é¸æŠã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: Expert Invoice Data Extractor
ğŸ“ OCRãƒ†ã‚¹ãƒˆã«æœ€é©ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè‡ªå‹•é¸æŠã•ã‚Œã¾ã™
âœ… äº’æ›æ€§OK

### ğŸ”§ ãƒ†ã‚¹ãƒˆè¨­å®š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰â”‚å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ•°â”‚è©³ç´°æ¤œè¨¼  â”‚
â”‚[ç²¾åº¦é‡è¦–â–¼]â”‚[5ä»¶â–¼]    â”‚â˜‘ï¸å®Ÿè¡Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### ğŸ“ ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€
Google Driveãƒ•ã‚©ãƒ«ãƒ€ID: [å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰]

### ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
[ğŸš€ çµ±ä¸€OCRãƒ†ã‚¹ãƒˆé–‹å§‹ (5ä»¶)] [ğŸ”„ ãƒªã‚»ãƒƒãƒˆ]

### ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ
- ãƒãƒƒãƒå‡¦ç†çµæœ
- ç²¾åº¦åˆ†æ
- **ğŸ‰ è©³ç´°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚¿ãƒ–åˆ†å‰²ï¼‰**: åŸºæœ¬æƒ…å ±ãƒ»æ˜ç´°ãƒ»JSONãƒ»PDF **NEW**
- çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¤œè¨¼: `main_invoice_number`, `t_number`, `receipt_number`, `key_info`
- ã‚¨ãƒ©ãƒ¼è©³ç´°
```

## 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é›¢è¨­è¨ˆ

### 3.1 3å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆUIï¼‰            â”‚
â”‚ - Streamlit ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ           â”‚
â”‚ - ã‚¿ãƒ–åˆ¶å¾¡ãƒ»çŠ¶æ…‹ç®¡ç†                â”‚
â”‚ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤ï¼ˆå‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ï¼‰     â”‚
â”‚ - çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼                  â”‚
â”‚ - ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³                â”‚
â”‚ - æ¤œè¨¼ãƒ»å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤ï¼ˆæ°¸ç¶šåŒ–ï¼‰            â”‚
â”‚ - Supabaseæ¥ç¶š                     â”‚
â”‚ - ã‚¯ã‚¨ãƒªå®Ÿè¡Œ                       â”‚
â”‚ - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è²¬å‹™åˆ†é›¢
- **UIå±¤**: è¡¨ç¤ºãƒ»å…¥åŠ›å—ä»˜ã®ã¿
- **å‡¦ç†å±¤**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ‡ãƒ¼ã‚¿å¤‰æ›
- **DBå±¤**: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãƒ»æ¤œç´¢

## 4. çµ±åˆã«ã‚ˆã‚‹æ”¹å–„åŠ¹æœ

### 4.1 ä¿å®ˆæ€§å‘ä¸Š
- âœ… **ã‚³ãƒ¼ãƒ‰é‡è¤‡å‰Šé™¤**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé¸æŠãƒ»UIéƒ¨å“çµ±åˆ
- âœ… **çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒä¸€å‡¦ç†ãƒ•ãƒ­ãƒ¼ã§ãƒã‚°æ¸›å°‘
- âœ… **ä¸€å…ƒç®¡ç†**: è¨­å®šãƒ»çŠ¶æ…‹ç®¡ç†ã®çµ±åˆ

### 4.2 ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
- âœ… **ç›´æ„Ÿçš„æ“ä½œ**: ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã§ç°¡å˜ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´
- âœ… **æ©Ÿèƒ½ç™ºè¦‹æ€§**: é–¢é€£æ©Ÿèƒ½ãŒåŒä¸€ç”»é¢
- âœ… **ä¸€è²«ã—ãŸUX**: çµ±ä¸€ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### 4.3 æ‹¡å¼µæ€§ç¢ºä¿
- âœ… **ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: Google Driveãƒ»Gmailå¯¾å¿œæº–å‚™å®Œäº†
- âœ… **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: æ–°æ©Ÿèƒ½è¿½åŠ ãŒå®¹æ˜“
- âœ… **è¨­å®šå…±æœ‰**: æ–°ã—ã„å…¥åŠ›ã‚½ãƒ¼ã‚¹å¯¾å¿œãŒç°¡å˜

## 5. ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»

### 5.1 å…¥åŠ›ã‚½ãƒ¼ã‚¹æ‹¡å¼µ
```
ğŸ“¤ è«‹æ±‚æ›¸å‡¦ç†ï¼ˆæœ€çµ‚å½¢ï¼‰
â”œâ”€â”€ ğŸš€ æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ â˜ï¸ Google Drive
â”‚   â””â”€â”€ ğŸ“§ Gmailæ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ ğŸ” OCRãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ â˜ï¸ Google Drive
    â””â”€â”€ ğŸ“§ Gmailæ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
```

### 5.2 å‡¦ç†ãƒ¢ãƒ¼ãƒ‰æ‹¡å¼µ
- **ãƒãƒƒãƒå‡¦ç†**: å¤§é‡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ‹¬å‡¦ç†
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†å¯¾å¿œ
- **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**: å®šæœŸå®Ÿè¡Œæ©Ÿèƒ½

## 6. ãƒ†ã‚¹ãƒˆè¦³ç‚¹

### 6.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é›¢ãƒ†ã‚¹ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å±¤**: ç‹¬ç«‹æ€§ãƒ»ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª
- **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤**: UIéä¾å­˜ã§ã®å‹•ä½œç¢ºèª
- **UIå±¤**: å‡¦ç†å±¤ãƒ¢ãƒƒã‚¯ä½¿ç”¨ã§ã®è¡¨ç¤ºç¢ºèª

### 6.2 çµ±åˆãƒ†ã‚¹ãƒˆ
- **ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ**: çŠ¶æ…‹ä¿æŒãƒ»è¨­å®šå¼•ãç¶™ã
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å„å±¤ã§ã®ã‚¨ãƒ©ãƒ¼ä¼æ’­
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: çµ±åˆã«ã‚ˆã‚‹æ€§èƒ½å½±éŸ¿

---

## 7. ğŸ‰ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½è©³ç´°ç”»é¢è¨­è¨ˆï¼ˆ2025å¹´7æœˆ27æ—¥è¿½åŠ ï¼‰ â˜…NEWâ˜…

### 7.1 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½æ¦‚è¦
çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå®Œå…¨å†æ§‹ç¯‰ã«ä¼´ã„ã€è«‹æ±‚æ›¸å‡¦ç†çµæœã®è©³ç´°ç¢ºèªæ©Ÿèƒ½ã‚’å¤§å¹…ã«æ‹¡å¼µã—ã¾ã—ãŸã€‚

#### 7.1.1 è¨­è¨ˆåŸå‰‡
- **ã‚¿ãƒ–åˆ†å‰²è¡¨ç¤º**: æƒ…å ±ã®ç¨®é¡åˆ¥ã«æ•´ç†ã—ã¦å¯èª­æ€§å‘ä¸Š
- **çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å¯¾å¿œ**: `main_invoice_number`, `t_number`, `receipt_number`, `key_info`å®Œå…¨å¯¾å¿œ
- **ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼åŠ¹ç‡åŒ–**: æŠ½å‡ºçµæœã®æ­£ç¢ºæ€§ã‚’è¿…é€Ÿã«ç¢ºèªå¯èƒ½
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­è¨ˆ**: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§æœ€é©è¡¨ç¤º

### 7.2 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ç”»é¢æ§‹æˆ

#### 7.2.1 å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š å‡¦ç†çµæœè©³ç´°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼                                    â”‚
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«å: invoice_sample.pdf                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“‹ åŸºæœ¬æƒ…å ±] [ğŸ“Š æ˜ç´°] [ğŸ” JSON] [ğŸ“„ PDF]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—† ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–å†…å®¹ã‚¨ãƒªã‚¢                                   â”‚
â”‚                                                           â”‚
â”‚   ï¼ˆé¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã®è©³ç´°å†…å®¹ã‚’è¡¨ç¤ºï¼‰                        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ğŸ“‹ åŸºæœ¬æƒ…å ±ã‚¿ãƒ– è©³ç´°è¨­è¨ˆ

#### 7.3.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ åŸºæœ¬æƒ…å ±                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ è«‹æ±‚æ›¸æƒ…å ±        â”‚ ğŸ’° é‡‘é¡æƒ…å ±                         â”‚ â”‚
â”‚ â”‚                    â”‚                                   â”‚ â”‚
â”‚ â”‚ â€¢ è«‹æ±‚å…ƒ:           â”‚ â€¢ ç¨è¾¼åˆè¨ˆ:                        â”‚ â”‚
â”‚ â”‚   æ ªå¼ä¼šç¤¾â—‹â—‹        â”‚   Â¥108,000                       â”‚ â”‚
â”‚ â”‚ â€¢ è«‹æ±‚å…ˆ:           â”‚ â€¢ ç¨æŠœåˆè¨ˆ:                        â”‚ â”‚
â”‚ â”‚   â–³â–³å•†äº‹           â”‚   Â¥100,000                       â”‚ â”‚
â”‚ â”‚ â€¢ è«‹æ±‚æ›¸ç•ªå·:        â”‚ â€¢ æ¶ˆè²»ç¨:                          â”‚ â”‚
â”‚ â”‚   INV-2025-001     â”‚   Â¥8,000                         â”‚ â”‚
â”‚ â”‚ â€¢ å—é ˜æ›¸ç•ªå·:        â”‚ â€¢ é€šè²¨:                           â”‚ â”‚
â”‚ â”‚   REC-2025-001     â”‚   JPY                            â”‚ â”‚
â”‚ â”‚ â€¢ Tç•ªå·:            â”‚                                   â”‚ â”‚
â”‚ â”‚   T1234567890123   â”‚                                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“… æ—¥ä»˜æƒ…å ±          â”‚ ğŸ”§ å‡¦ç†æƒ…å ±                         â”‚ â”‚
â”‚ â”‚                    â”‚                                   â”‚ â”‚
â”‚ â”‚ â€¢ ç™ºè¡Œæ—¥:           â”‚ â€¢ å‡¦ç†æ—¥æ™‚:                        â”‚ â”‚
â”‚ â”‚   2025-07-27       â”‚   2025-07-27 14:30:45           â”‚ â”‚
â”‚ â”‚ â€¢ æ”¯æ‰•æœŸæ—¥:          â”‚ â€¢ å‡¦ç†æ™‚é–“:                        â”‚ â”‚
â”‚ â”‚   2025-08-31       â”‚   2.3ç§’                          â”‚ â”‚
â”‚ â”‚                    â”‚ â€¢ ä¿¡é ¼åº¦:                          â”‚ â”‚
â”‚ â”‚                    â”‚   95.6%                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ”‘ ã‚­ãƒ¼æƒ…å ± (key_info)                                     â”‚ â”‚
â”‚ â”‚                                                           â”‚ â”‚
â”‚ â”‚ â€¢ æ”¯æ‰•æœŸé™: æœˆæœ«ç· ç¿Œæœˆæœ«æ”¯æ‰•ã„                              â”‚ â”‚
â”‚ â”‚ â€¢ å–å¼•æ¡ä»¶: éŠ€è¡ŒæŒ¯è¾¼                                       â”‚ â”‚
â”‚ â”‚ â€¢ å‚™è€ƒ: è«‹æ±‚æ›¸ã®è©³ç´°ç¢ºèªæ¸ˆã¿                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.3.2 çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¡¨ç¤ºä»•æ§˜
```python
# åŸºæœ¬æƒ…å ±ã‚¿ãƒ–ã§è¡¨ç¤ºã•ã‚Œã‚‹çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
unified_fields = {
    "main_invoice_number": "ãƒ¡ã‚¤ãƒ³è«‹æ±‚æ›¸ç•ªå·",  # çµ±ä¸€æ¸ˆã¿
    "receipt_number": "å—é ˜æ›¸ç•ªå·",           # æ–°è¦è¿½åŠ 
    "t_number": "é©æ ¼è«‹æ±‚æ›¸ç™ºè¡Œäº‹æ¥­è€…ç™»éŒ²ç•ªå·", # çµ±ä¸€æ¸ˆã¿
    "key_info": "ã‚­ãƒ¼æƒ…å ±ï¼ˆJSONBï¼‰",          # æ–°è¦è¿½åŠ 
    "issuer_name": "è«‹æ±‚å…ƒä¼æ¥­å",
    "recipient_name": "è«‹æ±‚å…ˆä¼æ¥­å",
    "total_amount_tax_included": "ç¨è¾¼åˆè¨ˆé‡‘é¡",
    "total_amount_tax_excluded": "ç¨æŠœåˆè¨ˆé‡‘é¡",
    "issue_date": "ç™ºè¡Œæ—¥",
    "due_date": "æ”¯æ‰•æœŸæ—¥",
    "currency": "é€šè²¨"
}
```

### 7.4 ğŸ“Š æ˜ç´°ã‚¿ãƒ– è©³ç´°è¨­è¨ˆ

#### 7.4.1 ag-Gridæ‹¡å¼µãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š è«‹æ±‚æ˜ç´°                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ æ˜ç´°ä¸€è¦§ (3ä»¶)                         [ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ No â”‚ å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å          â”‚ æ•°é‡ â”‚ å˜ä¾¡   â”‚ ç¨ç‡ â”‚ åˆè¨ˆ  â”‚ â”‚
â”‚ â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚ 1  â”‚ ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆåˆ¶ä½œè²»         â”‚ 1    â”‚100,000â”‚ 10%  â”‚110,000â”‚ â”‚
â”‚ â”‚ 2  â”‚ æœˆæ¬¡ä¿å®ˆè²»                â”‚ 1    â”‚ 20,000â”‚ 10%  â”‚ 22,000â”‚ â”‚
â”‚ â”‚ 3  â”‚ ãƒ‰ãƒ¡ã‚¤ãƒ³æ›´æ–°è²»             â”‚ 1    â”‚  3,000â”‚ 10%  â”‚  3,300â”‚ â”‚
â”‚ â”‚â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚                                    åˆè¨ˆ:            135,300â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” æ˜ç´°è©³ç´° (é¸æŠè¡Œ: 1)                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â€¢ å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å: ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆåˆ¶ä½œè²»                    â”‚ â”‚
â”‚ â”‚ â€¢ è©³ç´°èª¬æ˜: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ                     â”‚ â”‚
â”‚ â”‚ â€¢ æ•°é‡: 1.00                                           â”‚ â”‚
â”‚ â”‚ â€¢ å˜ä¾¡: Â¥100,000                                      â”‚ â”‚
â”‚ â”‚ â€¢ ç¨ç‡: 10.00%                                        â”‚ â”‚
â”‚ â”‚ â€¢ å°è¨ˆï¼ˆç¨æŠœï¼‰: Â¥100,000                               â”‚ â”‚
â”‚ â”‚ â€¢ æ¶ˆè²»ç¨: Â¥10,000                                     â”‚ â”‚
â”‚ â”‚ â€¢ å°è¨ˆï¼ˆç¨è¾¼ï¼‰: Â¥110,000                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.4.2 çµ±ä¸€æ˜ç´°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä»•æ§˜
```python
# æ˜ç´°ã‚¿ãƒ–ã§è¡¨ç¤ºã•ã‚Œã‚‹çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
line_item_unified_fields = {
    "item_description": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å",  # çµ±ä¸€æ¸ˆã¿ (æ—§: description)
    "quantity": "æ•°é‡",
    "unit_price": "å˜ä¾¡",
    "tax_rate": "ç¨ç‡ï¼ˆDECIMALï¼‰",          # çµ±ä¸€æ¸ˆã¿ (VARCHAR â†’ DECIMAL)
    "subtotal_excluding_tax": "å°è¨ˆï¼ˆç¨æŠœï¼‰",
    "tax_amount": "æ¶ˆè²»ç¨é¡",
    "subtotal_including_tax": "å°è¨ˆï¼ˆç¨è¾¼ï¼‰"
}
```

### 7.5 ğŸ” JSONã‚¿ãƒ– è©³ç´°è¨­è¨ˆ

#### 7.5.1 JSONè©³ç´°è¡¨ç¤ºãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” JSONè©³ç´°ãƒ‡ãƒ¼ã‚¿                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“‹ æŠ½å‡ºãƒ‡ãƒ¼ã‚¿] [ğŸ¤– AIãƒ¬ã‚¹ãƒãƒ³ã‚¹] [ğŸ”‘ ã‚­ãƒ¼æƒ…å ±]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“‹ æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ (extracted_data)                           â”‚ â”‚
â”‚ â”‚ {                                                      â”‚ â”‚
â”‚ â”‚   "main_invoice_number": "INV-2025-001",               â”‚ â”‚
â”‚ â”‚   "receipt_number": "REC-2025-001",                    â”‚ â”‚
â”‚ â”‚   "t_number": "T1234567890123",                        â”‚ â”‚
â”‚ â”‚   "issuer": "æ ªå¼ä¼šç¤¾â—‹â—‹",                               â”‚ â”‚
â”‚ â”‚   "payer": "â–³â–³å•†äº‹",                                   â”‚ â”‚
â”‚ â”‚   "issue_date": "2025-07-27",                          â”‚ â”‚
â”‚ â”‚   "due_date": "2025-08-31",                            â”‚ â”‚
â”‚ â”‚   "amount_inclusive_tax": 135300,                      â”‚ â”‚
â”‚ â”‚   "amount_exclusive_tax": 123000,                      â”‚ â”‚
â”‚ â”‚   "currency": "JPY",                                   â”‚ â”‚
â”‚ â”‚   "key_info": {                                        â”‚ â”‚
â”‚ â”‚     "payment_terms": "æœˆæœ«ç· ç¿Œæœˆæœ«æ”¯æ‰•ã„",                â”‚ â”‚
â”‚ â”‚     "payment_method": "éŠ€è¡ŒæŒ¯è¾¼",                       â”‚ â”‚
â”‚ â”‚     "notes": "è«‹æ±‚æ›¸ã®è©³ç´°ç¢ºèªæ¸ˆã¿"                      â”‚ â”‚
â”‚ â”‚   },                                                   â”‚ â”‚
â”‚ â”‚   "line_items": [                                      â”‚ â”‚
â”‚ â”‚     {                                                  â”‚ â”‚
â”‚ â”‚       "item_description": "ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆåˆ¶ä½œè²»",          â”‚ â”‚
â”‚ â”‚       "quantity": 1.0,                                 â”‚ â”‚
â”‚ â”‚       "unit_price": 100000,                            â”‚ â”‚
â”‚ â”‚       "tax_rate": 10.00                                â”‚ â”‚
â”‚ â”‚     }                                                  â”‚ â”‚
â”‚ â”‚   ]                                                    â”‚ â”‚
â”‚ â”‚ }                                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“¤ JSONãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰] [ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‚³ãƒ”ãƒ¼]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.5.2 AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ãƒ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AIç”Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ (raw_response)                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ {                                                      â”‚ â”‚
â”‚ â”‚   "model": "gemini-1.5-flash",                         â”‚ â”‚
â”‚ â”‚   "response_time": 2.3,                                â”‚ â”‚
â”‚ â”‚   "confidence_score": 95.6,                            â”‚ â”‚
â”‚ â”‚   "processing_metadata": {                             â”‚ â”‚
â”‚ â”‚     "prompt_used": "Expert Invoice Data Extractor",    â”‚ â”‚
â”‚ â”‚     "extraction_method": "unified_schema",             â”‚ â”‚
â”‚ â”‚     "validation_passed": true                          â”‚ â”‚
â”‚ â”‚   },                                                   â”‚ â”‚
â”‚ â”‚   "raw_ai_output": "{ ... AIå‡ºåŠ›ã®å®Œå…¨ãªJSONãƒ‡ãƒ¼ã‚¿ ... }" â”‚ â”‚
â”‚ â”‚ }                                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.6 ğŸ“„ PDFã‚¿ãƒ– è©³ç´°è¨­è¨ˆ

#### 7.6.1 PDFãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ PDF ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ invoice_sample.pdf                  [ğŸ“¤ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚                  PDFè¡¨ç¤ºã‚¨ãƒªã‚¢                          â”‚ â”‚
â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚
â”‚ â”‚     â”‚                                â”‚                 â”‚ â”‚
â”‚ â”‚     â”‚        PDFå†…å®¹è¡¨ç¤º              â”‚                 â”‚ â”‚
â”‚ â”‚     â”‚    ï¼ˆåŸ‹ã‚è¾¼ã¿PDFãƒ“ãƒ¥ãƒ¼ã‚¢ï¼‰       â”‚                 â”‚ â”‚
â”‚ â”‚     â”‚                                â”‚                 â”‚ â”‚
â”‚ â”‚     â”‚                                â”‚                 â”‚ â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚
â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚                                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±                                             â”‚
â”‚ â€¢ ãƒ•ã‚¡ã‚¤ãƒ«å: invoice_sample.pdf                           â”‚
â”‚ â€¢ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 245 KB                                   â”‚
â”‚ â€¢ ãƒšãƒ¼ã‚¸æ•°: 1                                             â”‚
â”‚ â€¢ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚: 2025-07-27 14:30:45                   â”‚
â”‚ â€¢ Google Drive ID: 1a2b3c4d5e6f7g8h9i0j                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.6.2 PDFè¡¨ç¤ºæŠ€è¡“ä»•æ§˜
```python
# PDFè¡¨ç¤ºã®æŠ€è¡“å®Ÿè£…
pdf_display_config = {
    "viewer_type": "streamlit_pdf_viewer",  # Streamlit PDFè¡¨ç¤º
    "embedding_support": True,              # åŸ‹ã‚è¾¼ã¿è¡¨ç¤º
    "download_support": True,               # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
    "zoom_control": True,                   # ã‚ºãƒ¼ãƒ æ©Ÿèƒ½
    "page_navigation": True,                # ãƒšãƒ¼ã‚¸é€ã‚Š
    "mobile_responsive": True               # ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
}
```

### 7.7 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã®çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œ

#### 7.7.1 çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¡¨ç¤ºãƒãƒƒãƒ”ãƒ³ã‚°
```python
# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã§ã®çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¡¨ç¤º
preview_field_mapping = {
    # åŸºæœ¬æƒ…å ±ã‚¿ãƒ–
    "main_invoice_number": "è«‹æ±‚æ›¸ç•ªå·",        # çµ±ä¸€æ¸ˆã¿
    "receipt_number": "å—é ˜æ›¸ç•ªå·",             # æ–°è¦è¿½åŠ 
    "t_number": "Tç•ªå·",                      # çµ±ä¸€æ¸ˆã¿
    "key_info": "ã‚­ãƒ¼æƒ…å ±",                   # æ–°è¦è¿½åŠ 
    
    # æ˜ç´°ã‚¿ãƒ–
    "item_description": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å",      # çµ±ä¸€æ¸ˆã¿
    "tax_rate": "ç¨ç‡ï¼ˆDECIMALå½¢å¼ï¼‰",         # çµ±ä¸€æ¸ˆã¿
    
    # JSON/PDFå…±é€š
    "updated_at": "æ›´æ–°æ—¥æ™‚",                 # çµ±ä¸€æ¸ˆã¿
    "extracted_data": "AIæŠ½å‡ºãƒ‡ãƒ¼ã‚¿",
    "raw_response": "AIç”Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹"
}
```

#### 7.7.2 ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼æ©Ÿèƒ½
```python
# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã§ã®çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼
validation_checks = {
    "field_presence": "å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å­˜åœ¨ç¢ºèª",
    "data_type_validation": "ãƒ‡ãƒ¼ã‚¿å‹æ¤œè¨¼ï¼ˆDECIMALç­‰ï¼‰",
    "field_name_consistency": "çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åç¢ºèª",
    "cross_table_consistency": "æœ¬ç•ªãƒ»OCRãƒ†ãƒ¼ãƒ–ãƒ«æ•´åˆæ€§ç¢ºèª"
}
```

### 7.8 ğŸ¯ çµ±ä¸€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ Streamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜ï¼ˆæ¯å›ãƒ–ãƒ¬ãªã„å®Ÿè£…ï¼‰ â˜…NEWâ˜…

#### 7.8.1 ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½å‘¼ã³å‡ºã—çµ±ä¸€é–¢æ•°
```python
def render_enhanced_result_tabs(result: Dict[str, Any], filename: str):
    """
    çµ±ä¸€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã®ãƒ¡ã‚¤ãƒ³é–¢æ•°
    ã€æ¯å›ã“ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ä¸€è²«ã—ãŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã‚’å®Ÿç¾ã€‘
    
    Args:
        result: å‡¦ç†çµæœãƒ‡ãƒ¼ã‚¿ï¼ˆextracted_data, raw_responseç­‰ã‚’å«ã‚€ï¼‰
        filename: å‡¦ç†å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«å
        
    Returns:
        ãªã—ï¼ˆStreamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ç›´æ¥è¡¨ç¤ºï¼‰
    """
    tab1, tab2, tab3, tab4 = st.tabs(["ğŸ“‹ åŸºæœ¬æƒ…å ±", "ğŸ“Š æ˜ç´°", "ğŸ” JSON", "ğŸ“„ PDF"])
    
    extracted_data = result.get('extracted_data', {})
    
    with tab1:
        render_basic_info_enhanced(extracted_data)
    
    with tab2:
        render_line_items_enhanced(extracted_data)
    
    with tab3:
        render_json_preview_enhanced(result, extracted_data)
    
    with tab4:
        render_pdf_preview_enhanced(result, filename)
```

#### 7.8.2 åŸºæœ¬æƒ…å ±ã‚¿ãƒ–å®Ÿè£…ä»•æ§˜
```python
def render_basic_info_enhanced(extracted_data: Dict[str, Any]):
    """
    åŸºæœ¬æƒ…å ±ã‚¿ãƒ–ã®çµ±ä¸€è¡¨ç¤ºé–¢æ•°
    ã€çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›ºå®šã€‘
    """
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("**ğŸ“ è«‹æ±‚æ›¸æƒ…å ±**")
        # çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä½¿ç”¨ï¼ˆãƒ–ãƒ¬ãªã„è¡¨ç¤ºï¼‰
        st.write(f"â€¢ è«‹æ±‚å…ƒ: {extracted_data.get('issuer', 'N/A')}")
        st.write(f"â€¢ è«‹æ±‚å…ˆ: {extracted_data.get('payer', 'N/A')}")
        st.write(f"â€¢ è«‹æ±‚æ›¸ç•ªå·: {extracted_data.get('main_invoice_number', 'N/A')}")  # çµ±ä¸€æ¸ˆã¿
        st.write(f"â€¢ å—é ˜æ›¸ç•ªå·: {extracted_data.get('receipt_number', 'N/A')}")      # çµ±ä¸€æ¸ˆã¿
        st.write(f"â€¢ Tç•ªå·: {extracted_data.get('t_number', 'N/A')}")                # çµ±ä¸€æ¸ˆã¿
    
    with col2:
        st.markdown("**ğŸ’° é‡‘é¡æƒ…å ±**")
        # çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿å‹ä½¿ç”¨
        st.write(f"â€¢ ç¨è¾¼åˆè¨ˆ: Â¥{extracted_data.get('amount_inclusive_tax', 0):,}")
        st.write(f"â€¢ ç¨æŠœåˆè¨ˆ: Â¥{extracted_data.get('amount_exclusive_tax', 0):,}")
        st.write(f"â€¢ é€šè²¨: {extracted_data.get('currency', 'JPY')}")
    
    # æ—¥ä»˜æƒ…å ±
    st.markdown("**ğŸ“… æ—¥ä»˜æƒ…å ±**")
    col3, col4 = st.columns(2)
    with col3:
        st.write(f"â€¢ ç™ºè¡Œæ—¥: {extracted_data.get('issue_date', 'N/A')}")
    with col4:
        st.write(f"â€¢ æ”¯æ‰•æœŸæ—¥: {extracted_data.get('due_date', 'N/A')}")
    
    # ã‚­ãƒ¼æƒ…å ±ï¼ˆçµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒæ–°æ©Ÿèƒ½ï¼‰
    if key_info := extracted_data.get('key_info'):
        st.markdown("**ğŸ”‘ ã‚­ãƒ¼æƒ…å ±**")
        if isinstance(key_info, dict):
            for key, value in key_info.items():
                st.write(f"â€¢ {key}: {value}")
        else:
            st.write(f"â€¢ ã‚­ãƒ¼æƒ…å ±: {key_info}")
```

#### 7.8.3 æ˜ç´°ã‚¿ãƒ–ag-Gridå®Ÿè£…ä»•æ§˜
```python
def render_line_items_enhanced(extracted_data: Dict[str, Any]):
    """
    æ˜ç´°ã‚¿ãƒ–ã®çµ±ä¸€ag-Gridè¡¨ç¤ºé–¢æ•°
    ã€çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œãƒ»å›ºå®šã‚«ãƒ©ãƒ å®šç¾©ã€‘
    """
    line_items = extracted_data.get('line_items', [])
    
    if not line_items:
        st.info("ğŸ“Š æ˜ç´°ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“")
        return
    
    st.markdown(f"**ğŸ“Š è«‹æ±‚æ˜ç´°** ({len(line_items)}ä»¶)")
    
    # çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œã®ag-Gridè¨­å®šï¼ˆæ¯å›å›ºå®šï¼‰
    column_defs = [
        {"headerName": "No", "field": "no", "width": 60, "type": "numericColumn"},
        {"headerName": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹å", "field": "item_description", "width": 200},  # çµ±ä¸€æ¸ˆã¿
        {"headerName": "æ•°é‡", "field": "quantity", "width": 80, "type": "numericColumn"},
        {"headerName": "å˜ä¾¡", "field": "unit_price", "width": 100, "type": "numericColumn", 
         "valueFormatter": "value ? 'Â¥' + value.toLocaleString() : ''"},
        {"headerName": "ç¨ç‡", "field": "tax_rate", "width": 80, "type": "numericColumn",
         "valueFormatter": "value ? value + '%' : ''"},  # DECIMALå¯¾å¿œ
        {"headerName": "åˆè¨ˆ", "field": "total", "width": 120, "type": "numericColumn",
         "valueFormatter": "value ? 'Â¥' + value.toLocaleString() : ''"}
    ]
    
    # ãƒ‡ãƒ¼ã‚¿å¤‰æ›ï¼ˆçµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä½¿ç”¨ï¼‰
    grid_data = []
    for i, item in enumerate(line_items, 1):
        # çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’ä½¿ç”¨ï¼ˆãƒ–ãƒ¬ãªã„å®Ÿè£…ï¼‰
        description = item.get("item_description", item.get("description", ""))  # ä¸‹ä½äº’æ›
        quantity = float(item.get("quantity", 0))
        unit_price = float(item.get("unit_price", 0))
        tax_rate = float(item.get("tax_rate", 0))  # DECIMALå¯¾å¿œ
        total = quantity * unit_price * (1 + tax_rate / 100)
        
        grid_data.append({
            "no": i,
            "item_description": description,
            "quantity": quantity,
            "unit_price": unit_price,
            "tax_rate": tax_rate,
            "total": total
        })
    
    # ag-Gridè¡¨ç¤ºï¼ˆæ¯å›åŒã˜è¨­å®šï¼‰
    AgGrid(
        grid_data,
        columns=column_defs,
        height=300,
        fit_columns_on_grid_load=True,
        enable_enterprise_modules=False,
        selection_mode="single"
    )
```

#### 7.8.4 JSONã‚¿ãƒ–å®Ÿè£…ä»•æ§˜
```python
def render_json_preview_enhanced(result: Dict[str, Any], extracted_data: Dict[str, Any]):
    """
    JSONã‚¿ãƒ–ã®çµ±ä¸€è¡¨ç¤ºé–¢æ•°
    ã€ã‚¿ãƒ–åˆ†å‰²ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ä»˜ãã€‘
    """
    sub_tab1, sub_tab2, sub_tab3 = st.tabs(["ğŸ“‹ æŠ½å‡ºãƒ‡ãƒ¼ã‚¿", "ğŸ¤– AIãƒ¬ã‚¹ãƒãƒ³ã‚¹", "ğŸ”‘ ã‚­ãƒ¼æƒ…å ±"])
    
    with sub_tab1:
        st.markdown("**ğŸ“‹ æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ (extracted_data)**")
        # JSONæ•´å½¢è¡¨ç¤ºï¼ˆæ¯å›åŒã˜å½¢å¼ï¼‰
        json_str = json.dumps(extracted_data, ensure_ascii=False, indent=2)
        st.code(json_str, language="json")
        
        # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆæ¯å›æä¾›ï¼‰
        st.download_button(
            label="ğŸ“¤ æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
            data=json_str,
            file_name=f"extracted_data_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json",
            mime="application/json"
        )
    
    with sub_tab2:
        st.markdown("**ğŸ¤– AIç”Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ (raw_response)**")
        raw_response = result.get('raw_response', {})
        json_str = json.dumps(raw_response, ensure_ascii=False, indent=2)
        st.code(json_str, language="json")
        
        # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
        st.download_button(
            label="ğŸ“¤ AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰", 
            data=json_str,
            file_name=f"raw_response_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json",
            mime="application/json"
        )
    
    with sub_tab3:
        st.markdown("**ğŸ”‘ ã‚­ãƒ¼æƒ…å ±è©³ç´°**")
        key_info = extracted_data.get('key_info', {})
        if key_info:
            json_str = json.dumps(key_info, ensure_ascii=False, indent=2)
            st.code(json_str, language="json")
        else:
            st.info("ã‚­ãƒ¼æƒ…å ±ãŒå­˜åœ¨ã—ã¾ã›ã‚“")
```

#### 7.8.5 PDFã‚¿ãƒ–å®Ÿè£…ä»•æ§˜
```python
def render_pdf_preview_enhanced(result: Dict[str, Any], filename: str):
    """
    PDFã‚¿ãƒ–ã®çµ±ä¸€è¡¨ç¤ºé–¢æ•°
    ã€PDFè¡¨ç¤ºãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã€‘
    """
    st.markdown(f"**ğŸ“„ PDF ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**")
    st.markdown(f"ğŸ“„ {filename}")
    
    # PDFè¡¨ç¤ºï¼ˆStreamlitæ¨™æº–æ©Ÿèƒ½ä½¿ç”¨ï¼‰
    if pdf_data := result.get('pdf_data'):
        # PDFè¡¨ç¤ºã‚¨ãƒªã‚¢
        st.markdown("**PDFå†…å®¹:**")
        try:
            # base64ãƒ‡ãƒ¼ã‚¿ã®å ´åˆã¯ãƒ‡ã‚³ãƒ¼ãƒ‰
            if isinstance(pdf_data, str):
                pdf_bytes = base64.b64decode(pdf_data)
            else:
                pdf_bytes = pdf_data
                
            # PDFè¡¨ç¤ºï¼ˆæ¯å›åŒã˜å®Ÿè£…ï¼‰
            st.write("PDFå†…å®¹ã‚’è¡¨ç¤ºä¸­...")
            # æ³¨ï¼šå®Ÿéš›ã®PDFè¡¨ç¤ºã¯Streamlitã®åˆ¶é™ã«ã‚ˆã‚Šåˆ¶é™çš„
            
            # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆæ¯å›æä¾›ï¼‰
            st.download_button(
                label="ğŸ“¤ PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
                data=pdf_bytes,
                file_name=filename,
                mime="application/pdf"
            )
            
        except Exception as e:
            st.error(f"PDFè¡¨ç¤ºã‚¨ãƒ©ãƒ¼: {str(e)}")
    
    # ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ï¼ˆæ¯å›è¡¨ç¤ºï¼‰
    st.markdown("**ğŸ“Š ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±**")
    file_info = result.get('file_info', {})
    col1, col2 = st.columns(2)
    
    with col1:
        st.write(f"â€¢ ãƒ•ã‚¡ã‚¤ãƒ«å: {filename}")
        st.write(f"â€¢ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: {file_info.get('size', 'N/A')}")
    
    with col2:
        st.write(f"â€¢ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚: {file_info.get('upload_time', 'N/A')}")
        if gdrive_id := file_info.get('gdrive_file_id'):
            st.write(f"â€¢ Google Drive ID: {gdrive_id}")
```

### 7.9 ğŸ¯ çµ±ä¸€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ä½¿ç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆé–‹ç™ºãƒãƒ¼ãƒ å‘ã‘ï¼‰ â˜…NEWâ˜…

#### 7.9.1 å¿…é ˆä½¿ç”¨æ–¹æ³•
```python
# ã€å¿…é ˆã€‘æœ¬ç•ªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»OCRãƒ†ã‚¹ãƒˆå…±é€šã§ä½¿ç”¨
def render_upload_results(results: List[Dict], mode: str):
    """ã©ã®ç”»é¢ã§ã‚‚å¿…ãšã“ã®å½¢å¼ã§å‘¼ã³å‡ºã—"""
    for i, result in enumerate(results):
        filename = result.get('filename', f'file_{i+1}')
        
        # çµ±ä¸€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½å‘¼ã³å‡ºã—ï¼ˆæ¯å›å¿…é ˆï¼‰
        render_enhanced_result_tabs(result, filename)
        
        # åŒºåˆ‡ã‚Šç·šï¼ˆè¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«æ™‚ï¼‰
        if i < len(results) - 1:
            st.divider()
```

#### 7.9.2 ãƒ‡ãƒ¼ã‚¿å½¢å¼è¦ä»¶
```python
# ã€å¿…é ˆã€‘resultè¾æ›¸ã®çµ±ä¸€å½¢å¼
required_result_format = {
    "extracted_data": {
        # çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå¿…é ˆï¼‰
        "main_invoice_number": "INV-2025-001",
        "receipt_number": "REC-2025-001", 
        "t_number": "T1234567890123",
        "key_info": {},
        
        # æ˜ç´°ï¼ˆçµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
        "line_items": [
            {
                "item_description": "å•†å“å",  # çµ±ä¸€æ¸ˆã¿
                "tax_rate": 10.00            # DECIMALå½¢å¼
            }
        ]
    },
    "raw_response": {},      # AIç”Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹
    "filename": "file.pdf",  # ãƒ•ã‚¡ã‚¤ãƒ«å
    "file_info": {},         # ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
    "pdf_data": b"..."       # PDFãƒã‚¤ãƒŠãƒªï¼ˆä»»æ„ï¼‰
}
```

#### 7.9.3 é–‹ç™ºæ™‚ã®æ³¨æ„äº‹é …
1. **å¿…ãš`render_enhanced_result_tabs()`ã‚’ä½¿ç”¨** - ç‹¬è‡ªå®Ÿè£…ç¦æ­¢
2. **çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’å³å®ˆ** - `main_invoice_number`, `t_number`, `receipt_number`, `key_info`
3. **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®æ”¹å¤‰ç¦æ­¢** - ã‚¿ãƒ–æ§‹æˆãƒ»ã‚«ãƒ©ãƒ æ§‹æˆã¯å›ºå®š
4. **ä¸‹ä½äº’æ›æ€§ç¶­æŒ** - æ—§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åï¼ˆ`description`ç­‰ï¼‰ã‚‚ã‚µãƒãƒ¼ãƒˆ
5. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€** - å„ã‚¿ãƒ–ã§å…±é€šã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºæ–¹å¼

---

## æ”¹è¨‚å±¥æ­´
- 2025-01-23: çµ±åˆUIè¨­è¨ˆï¼ˆã‚¿ãƒ–æ–¹å¼ï¼‰åæ˜ 
- 2025-01-23: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ†é›¢è¨­è¨ˆè¿½åŠ 
- **2025-07-27: ğŸ‰ çµ±ä¸€ã‚¹ã‚­ãƒ¼ãƒå®Œå…¨å†æ§‹ç¯‰å¯¾å¿œãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½æ‹¡å¼µè©³ç´°è¨­è¨ˆè¿½åŠ ** **NEW**