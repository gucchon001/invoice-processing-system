# è«‹æ±‚æ›¸å‡¦ç†è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ  å¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä»•æ§˜æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** 1.2
**ä½œæˆæ—¥:** 2025/07/17

## 1. æ¦‚è¦
æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€è«‹æ±‚æ›¸å‡¦ç†è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ãŒé€£æºã™ã‚‹å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆAPIï¼‰ã®ä»•æ§˜ã‚’å®šç¾©ã™ã‚‹ã€‚

## 2. Gemini API

### 2.1. ç›®çš„
è«‹æ±‚æ›¸PDFã‚„ã‚«ãƒ¼ãƒ‰æ˜ç´°PDFã‹ã‚‰ã€æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ï¼ˆJSONï¼‰ã‚’æŠ½å‡ºã™ã‚‹ã€‚ã¾ãŸã€ä¼æ¥­åã®è¡¨è¨˜æºã‚Œå¸åã‚„ã€è¤‡æ•°å€™è£œã‹ã‚‰ã®å†…å®¹ç‰¹å®šã¨ã„ã£ãŸã€é«˜åº¦ãªè‡ªç„¶è¨€èªå‡¦ç†ã‚’æ‹…ã†ã€‚

### 2.2. åˆ©ç”¨ãƒ¢ãƒ‡ãƒ«
* **`gemini-1.5-flash`**

### 2.3. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
* **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:** `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent`
* **ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼:**
    * `contents`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã€Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸPDFãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã€‚
    * `generationConfig`: `response_mime_type`ã‚’`application/json`ã«æŒ‡å®šã€‚
* **ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼:**
    * AIã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸJSONæ–‡å­—åˆ—ã€‚
* **èªè¨¼:** APIã‚­ãƒ¼èªè¨¼ã€‚APIã‚­ãƒ¼ã¯GCPã®Secret Managerã¾ãŸã¯Streamlitã®Secretsç®¡ç†ã§å®‰å…¨ã«ç®¡ç†ã™ã‚‹ã€‚

## 3. Supabase API

### 3.1. ç›®çš„
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸»è¦ãªãƒ‡ãƒ¼ã‚¿ï¼ˆè«‹æ±‚æ›¸æƒ…å ±ã€æ”¯æ‰•ãƒã‚¹ã‚¿ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãªã©ï¼‰ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ãŸã‚ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚

### 3.2. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** Pythonç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª `supabase-py` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
* **ä¸»ãªæ“ä½œ:**
    * `select()`: ãƒ‡ãƒ¼ã‚¿ã®å‚ç…§
    * `insert()`: æ–°è¦ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ 
    * `update()`: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°
    * `delete()`: ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤
* **èªè¨¼:** Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®URLã¨åŒ¿åã‚­ãƒ¼ï¼ˆanon keyï¼‰ã‚’ä½¿ç”¨ã€‚ã“ã‚Œã‚‰ã¯Streamlitã®Secretsç®¡ç†ã§å®‰å…¨ã«ç®¡ç†ã™ã‚‹ã€‚

## 4. Google Drive API

### 4.1. ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè«‹æ±‚æ›¸PDFã®åŸæœ¬ã‚’ã€æ°¸ç¶šçš„ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦ä¿ç®¡ã™ã‚‹ã€‚

### 4.2. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** Pythonç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª `google-api-python-client` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
* **ä¸»ãªæ“ä½œ:**
    * `files.create()`: ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    * `files.get()`: ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆURLãªã©ï¼‰
* **èªè¨¼:** ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã€‚GCPã§ä½œæˆã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆJSONï¼‰ã‚’Streamlitã®Secretsç®¡ç†ã§å®‰å…¨ã«ç®¡ç†ã™ã‚‹ã€‚

## 5. Google Sheets API

### 5.1. ç›®çš„
ç®¡ç†è€…ãŒæ‰¿èªã—ãŸæœ€çµ‚çš„ãªä»•è¨³ãƒ‡ãƒ¼ã‚¿ã‚’ã€freeeé€£æºç”¨ã®ä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦æŒ‡å®šã®Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«æ›¸ãå‡ºã™ã€‚

### 5.2. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** `gspread` ã¾ãŸã¯ `google-api-python-client` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
* **ä¸»ãªæ“ä½œ:**
    * `spreadsheets.values.append()`: æŒ‡å®šã—ãŸã‚·ãƒ¼ãƒˆã®æœ€çµ‚è¡Œã«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½è¨˜ã™ã‚‹ã€‚
* **èªè¨¼:** ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã€‚ï¼ˆGoogle Drive APIã¨å…±é€šï¼‰

## 6. Google OAuth 2.0 (ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼)

### 6.1. ç›®çš„
Streamlitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªèº«ã®Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### 6.2. é–‹ç™ºãƒ»æœ¬ç•ªçµ±ä¸€èªè¨¼ä»•æ§˜ï¼ˆstreamlit-oauthï¼‰

#### 6.2.1. çµ±ä¸€æ–¹é‡
**é–‹ç™ºç’°å¢ƒãƒ»æœ¬ç•ªç’°å¢ƒã¨ã‚‚ã« `streamlit-oauth` ã‚’ä½¿ç”¨** ã—ã€åŒä¸€ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

#### 6.2.2. é–‹ç™ºç’°å¢ƒå®Ÿè£…ä»•æ§˜

* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** `streamlit-oauth` (æœ€æ–°å®‰å®šç‰ˆ)
* **èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼:** Google OAuth 2.0
* **å®Ÿè£…ä¾‹:**
    ```python
    import streamlit as st
    from streamlit_oauth import OAuth2Component
    import requests
    
    # OAuthè¨­å®š
    oauth2 = OAuth2Component(
        client_id=st.secrets["auth"]["client_id"],
        client_secret=st.secrets["auth"]["client_secret"],
        authorize_endpoint="https://accounts.google.com/o/oauth2/auth",
        token_endpoint="https://oauth2.googleapis.com/token",
        refresh_token_endpoint="https://oauth2.googleapis.com/token",
        revoke_token_endpoint="https://oauth2.googleapis.com/revoke",
    )
    
    def check_authentication():
        """èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯"""
        if 'auth_code' not in st.session_state:
            return None
        return st.session_state['auth_code']
    
    def get_user_info(token):
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—"""
        headers = {'Authorization': f'Bearer {token["access_token"]}'}
        response = requests.get(
            'https://www.googleapis.com/oauth2/v2/userinfo',
            headers=headers
        )
        return response.json() if response.status_code == 200 else None
    
    def main():
        st.title("è«‹æ±‚æ›¸å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ")
        
        # èªè¨¼ãƒã‚§ãƒƒã‚¯
        if 'auth_code' not in st.session_state:
            # ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³è¡¨ç¤º
            st.info("ğŸ” Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„")
            result = oauth2.authorize_button(
                "Googleã§ãƒ­ã‚°ã‚¤ãƒ³",
                redirect_uri=st.secrets["auth"]["redirect_uri"],
                scope="openid email profile"
            )
            
            if result and 'token' in result:
                st.session_state['auth_code'] = result['token']
                st.success("ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸï¼")
                st.rerun()
        else:
            # ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å‡¦ç†
            user_info = get_user_info(st.session_state['auth_code'])
            if user_info:
                st.write(f"ã‚ˆã†ã“ãã€{user_info['name']}ã•ã‚“ï¼")
                st.write(f"Email: {user_info['email']}")
                
                # ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                if st.button("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"):
                    del st.session_state['auth_code']
                    st.rerun()
            else:
                st.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ")
                del st.session_state['auth_code']
                st.rerun()
    ```

#### 6.2.3. é–‹ç™ºç’°å¢ƒè¨­å®š

* **å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:**
    ```bash
    pip install streamlit-oauth requests
    ```

* **Streamlitè¨­å®š (`.streamlit/secrets.toml`):**
    ```toml
    [auth]
    client_id = "123456789-abcdef.apps.googleusercontent.com"
    client_secret = "GOCSPX-your-google-client-secret"
    redirect_uri = "http://localhost:8501/oauth/callback"
    cookie_secret = "development_secret_32_chars_minimum"
    ```

#### 6.2.4. GCPè¨­å®šï¼ˆé–‹ç™ºãƒ»æœ¬ç•ªå…±é€šï¼‰

* **OAuthåŒæ„ç”»é¢ã®è¨­å®š:**
    * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å: "è«‹æ±‚æ›¸å‡¦ç†è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ "
    * æ‰¿èªæ¸ˆã¿ãƒ‰ãƒ¡ã‚¤ãƒ³: `localhost` (é–‹ç™ºç”¨), `your-domain.run.app` (æœ¬ç•ªç”¨)
    * ã‚¹ã‚³ãƒ¼ãƒ—: `openid`, `email`, `profile`
    * ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼: é–‹ç™ºãƒãƒ¼ãƒ ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½åŠ 

* **OAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã®è¨­å®š:**
    * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡: "ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"
    * **æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI:**
        * `http://localhost:8501/oauth/callback` (é–‹ç™ºç’°å¢ƒ)
        * `http://localhost:8502/oauth/callback` (é–‹ç™ºç’°å¢ƒãƒ»è¤‡æ•°ãƒãƒ¼ãƒˆ)
        * `https://your-app-domain.run.app/oauth/callback` (æœ¬ç•ªç’°å¢ƒ)

#### 6.2.5. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

1. **ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:**
    ```bash
    pip install streamlit streamlit-oauth requests
    ```

2. **GCPè¨­å®š:**
    * OAuthåŒæ„ç”»é¢ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã‚’ä½œæˆ
    * ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã« `http://localhost:8501/oauth/callback` ã‚’è¿½åŠ 

3. **ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®š:**
    ```bash
    mkdir -p .streamlit
    # .streamlit/secrets.toml ã‚’ä½œæˆã—ã€èªè¨¼æƒ…å ±ã‚’è¨­å®š
    ```

4. **å‹•ä½œç¢ºèª:**
    ```bash
    streamlit run app.py
    # http://localhost:8501 ã§ OAuth ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºèª
    ```

#### 6.2.6. ç’°å¢ƒåˆ¥è¨­å®šã®åˆ‡ã‚Šæ›¿ãˆ

* **é–‹ç™ºç’°å¢ƒç”¨ secrets.toml:**
    ```toml
    [auth]
    redirect_uri = "http://localhost:8501/oauth/callback"
    ```

* **æœ¬ç•ªç’°å¢ƒç”¨ secrets.toml:**
    ```toml
    [auth]  
    redirect_uri = "https://your-app-domain.run.app/oauth/callback"
    ```

### 6.3. æœ¬ç•ªç’°å¢ƒã«ãŠã‘ã‚‹èªè¨¼ä»•æ§˜ï¼ˆæ±ºå®šç‰ˆï¼‰

#### 6.3.1. åŸºæœ¬æ–¹é‡
æœ¬ç•ªç’°å¢ƒã§ã¯ **`streamlit-oauth`** ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸGoogle OAuth 2.0èªè¨¼ã‚’å®Ÿè£…ã™ã‚‹ã€‚

#### 6.3.2. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä»•æ§˜
* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** `streamlit-oauth` (æœ€æ–°å®‰å®šç‰ˆ)
* **èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼:** Google
* **èªè¨¼ãƒ•ãƒ­ãƒ¼:** OAuth 2.0 Authorization Code Flow
* **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†:** Streamlit Session State

#### 6.3.3. å®Ÿè£…ä»•æ§˜
```python
import streamlit as st
from streamlit_oauth import OAuth2Component

# OAuthè¨­å®š
oauth2 = OAuth2Component(
    client_id=st.secrets["auth"]["client_id"],
    client_secret=st.secrets["auth"]["client_secret"],
    authorize_endpoint="https://accounts.google.com/o/oauth2/auth",
    token_endpoint="https://oauth2.googleapis.com/token",
    refresh_token_endpoint="https://oauth2.googleapis.com/token",
    revoke_token_endpoint="https://oauth2.googleapis.com/revoke",
)

# èªè¨¼çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯é–¢æ•°
def check_authentication():
    if 'token' not in st.session_state:
        return None
    return st.session_state['token']

# ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—é–¢æ•°
def get_user_info(token):
    # Google UserInfo APIã‚’å‘¼ã³å‡ºã—
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆemail, name, pictureï¼‰ã‚’å–å¾—
    pass
```

#### 6.3.4. æœ¬ç•ªç’°å¢ƒè¨­å®š
* **GCP OAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š:**
    * **æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI:** 
        * `https://your-app-domain.run.app/oauth/callback`
        * è¤‡æ•°ç’°å¢ƒå¯¾å¿œ: staging/productionå„ç’°å¢ƒã®URL
    * **æ‰¿èªæ¸ˆã¿ã® JavaScript ç”Ÿæˆå…ƒ:** 
        * `https://your-app-domain.run.app`

* **Streamlit Secretsè¨­å®š (æœ¬ç•ªç’°å¢ƒ):**
    ```toml
    [auth]
    client_id = "æœ¬ç•ªç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID"
    client_secret = "æœ¬ç•ªç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ"
    redirect_uri = "https://your-app-domain.run.app/oauth/callback"
    cookie_secret = "æœ¬ç•ªç”¨ã‚»ã‚­ãƒ¥ã‚¢ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ï¼ˆ32æ–‡å­—ä»¥ä¸Šï¼‰"
    session_max_age = 28800  # 8æ™‚é–“
    ```

#### 6.3.5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜
* **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†:**
    * ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™: 8æ™‚é–“
    * è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
    * CSRFä¿è­·
* **ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†:**
    * ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¯ãƒ¡ãƒ¢ãƒªå†…ã®ã¿ä¿æŒ
    * ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã¯ä½¿ç”¨ã—ãªã„ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ï¼‰
* **HTTPSå¼·åˆ¶:** æœ¬ç•ªç’°å¢ƒã§ã¯å…¨é€šä¿¡ã‚’HTTPSåŒ–

#### 6.3.6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
* **èªè¨¼å¤±æ•—æ™‚:**
    * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    * ç®¡ç†è€…ã¸ã®ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
    * ãƒ­ã‚°è¨˜éŒ²ï¼ˆå€‹äººæƒ…å ±é™¤å¤–ï¼‰
* **ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œæ™‚:**
    * è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ã®å†èªè¨¼
    * ä½œæ¥­ä¸­ãƒ‡ãƒ¼ã‚¿ã®ä¸€æ™‚ä¿å­˜ï¼ˆå¯èƒ½ãªç¯„å›²ï¼‰

#### 6.3.7. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯¾å¿œ
* **streamlit-oauthä¸å…·åˆæ™‚ã®å¯¾å¿œ:**
    * **ä»£æ›¿æ¡ˆ1:** GCP Identity-Aware Proxy (IAP) ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
    * **ä»£æ›¿æ¡ˆ2:** ã‚«ã‚¹ã‚¿ãƒ èªè¨¼å®Ÿè£…
    * **ç·Šæ€¥å¯¾å¿œ:** ä¸€æ™‚çš„ãª IP åˆ¶é™ + ç°¡æ˜“èªè¨¼

#### 6.3.8. ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®æ³¨æ„äº‹é …
* **ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯:** èªè¨¼é–¢é€£ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
* **ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIæ›´æ–°:** ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆURLã«åˆã‚ã›ã¦GCPè¨­å®šã‚’æ›´æ–°
* **å‹•ä½œç¢ºèª:** ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶šã®å‹•ä½œãƒ†ã‚¹ãƒˆå®Ÿæ–½

## 7. Google Slides API (çµŒç†ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯)

### 7.1. ç›®çš„
çµŒç†ãƒãƒ³ãƒ‰ãƒ–ãƒƒã‚¯ï¼ˆGoogle Slidesï¼‰ã‹ã‚‰çµŒç†ãƒ«ãƒ¼ãƒ«ã‚’è‡ªå‹•æŠ½å‡ºã—ã€è«‹æ±‚æ›¸å‡¦ç†ã®æº–æ‹ æ€§ãƒã‚§ãƒƒã‚¯ã«ä½¿ç”¨ã™ã‚‹ã€‚

### 7.2. å¯¾è±¡ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
* **URL:** https://docs.google.com/presentation/d/1oIjB0Dv7yXVw_3NqUdrBuaa5-rI2ZL5K9dTGYMqV04o/edit
* **ã‚¿ã‚¤ãƒˆãƒ«:** ãƒˆãƒ¢ãƒã‚«ã‚¤ çµŒç†ãƒ«ãƒ¼ãƒ«ãƒ–ãƒƒã‚¯
* **å½¢å¼:** Google Slides

### 7.3. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
* **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª:** Pythonç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª `google-api-python-client` ã‚’ä½¿ç”¨
* **API ãƒãƒ¼ã‚¸ãƒ§ãƒ³:** v1
* **ä¸»ãªæ“ä½œ:**
    * `presentations.get()`: ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®å–å¾—
    * `presentations.pages.get()`: ç‰¹å®šãƒšãƒ¼ã‚¸ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰ã®å–å¾—
* **èªè¨¼:** ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ï¼ˆGoogle Drive APIã¨å…±é€šï¼‰

### 7.4. ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºä»•æ§˜
* **æŠ½å‡ºå¯¾è±¡:**
    * å‹˜å®šç§‘ç›®ã®é©æ­£ãªä½¿ã„åˆ†ã‘ãƒ«ãƒ¼ãƒ«
    * æ”¯æ‰•æœŸæ—¥ã®è¨ˆç®—ãƒ«ãƒ¼ãƒ«
    * ç”³è«‹ã‚¿ã‚¤ãƒˆãƒ«ã®å‘½åè¦å‰‡
    * é‡‘é¡ãƒ»ç¨ç‡ã®å¦¥å½“æ€§åŸºæº–
    * æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è¦ä»¶
* **AIè§£æ:**
    * å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ»ç”»åƒã‚’ Gemini API ã§è§£æ
    * çµŒç†ãƒ«ãƒ¼ãƒ«ã‚’æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONï¼‰ã¨ã—ã¦æŠ½å‡º
    * `accounting_rules` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
* **æ›´æ–°é »åº¦:** ç®¡ç†è€…ã«ã‚ˆã‚‹æ‰‹å‹•å®Ÿè¡Œï¼ˆæœˆæ¬¡æƒ³å®šï¼‰

### 7.5. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
* **ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚¨ãƒ©ãƒ¼:** ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®èª­ã¿å–ã‚Šæ¨©é™ãŒå¿…è¦
* **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼:** ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã®å®Ÿè£…
* **APIåˆ¶é™:** Rate Limiting ã¸ã®å¯¾å¿œ